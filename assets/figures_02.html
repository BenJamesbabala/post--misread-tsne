
<div class="tsne-group">
  <div class="original">
    <span class="caption">Original</span>
    <canvas class="tsne-plot"></canvas>
  </div>
  <div class="runners">
  </div>
</div>

<script>
(function() {
  var dis = d3.select("#figures-02")
  var dataset = "Two Clusters"
  var demo = demosByName[dataset];
  var params = [50, 2]
  var examples = [
    { perplexity: 30, epsilon: 10, dim: 2, step: 10 },
    { perplexity: 30, epsilon: 10, dim: 2, step: 20 },
    { perplexity: 30, epsilon: 10, dim: 2, step: 60},
    { perplexity: 30, epsilon: 10, dim: 2, step: 120 },
    { perplexity: 30, epsilon: 10, dim: 2, step: 1000 },
  ]
  // original
  var originalCanvas = dis.select(".original .tsne-plot")
    .style("width", FIGURES.width + "px")
    .style("height", FIGURES.height + "px")
    .attr("width", FIGURES.downscaleWidth + "px")
    .attr("height", FIGURES.downscaleHeight + "px")
    .node();
  var originalPoints = getPoints(demo, params)
  visualize(originalPoints, originalCanvas, null, null)

  // examples
  var runners = dis.select(".runners").selectAll("div.runner").data(examples)
    .enter().append("div").classed("runner", true)

  runners.append("span").classed("caption", true)
  .text(function(d) { return "Perplexity = " + d.perplexity})
  runners.append("canvas")
    .style("width", FIGURES.width + "px")
    .style("height", FIGURES.height + "px")
    .attr("width", FIGURES.downscaleWidth + "px")
    .attr("height", FIGURES.downscaleHeight + "px")
    .each(function(d) {
      var canvas = this;
      //var points = getPoints(demo, params)
      visualize(originalPoints, canvas)
      runDemoSync(originalPoints, canvas, d, d.step);
    })

  runners.append("br")
  runners.append("span").classed("caption", true).classed("step", true)
    .text(function(d) { return "Step " + d.step})


})()
</script>
